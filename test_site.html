<!DOCTYPE html>
<html>

<head>
<title>TEST PAGE</title>
<script>
// stolen from http://papermashup.com/read-url-get-variables-withjavascript/
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = decodeURIComponent(value);
    });
    return vars;
}

var derp = function () {
    var elem = document.getElementById('derp');
    elem.maxLength = 5000;
}

var OMG = function () {
    var f = document.createElement('form');
    f.setAttribute('name', 'omgform');
    var i = document.createElement('input');
    i.setAttribute('type', 'text');
    i.setAttribute('name', 'derp');
    f.appendChild(i);
    document.body.appendChild(f);
};

(function () {
    vars = getUrlVars();
    console.log(vars);
    for (var i in vars) {
        document.write(i + " :: " + vars[i] + "\n");
    }
})();
</script>
</head>

<body>
    <form action="#" method="GET" name="defaultform">
        <input type="text" id="derp" name="text" maxlength=1>
        <input type="submit" id="submit" value="go">
    </form>
    <button id="fixit" onclick="derp()">FIXIT</button>

    <button id="omg" onclick="OMG()">OMG</button>
</body>
</html>
